function a(s){window.enmity.plugins.registerPlugin(s)}function r(...s){return window.enmity.modules.getByProps(...s)}window.enmity.modules.common;function g(s){return window.enmity.patcher.create(s)}var c="MessageSniffer",l="1.0.3",f="Logs all message events including edits, deletions, and bulk deletions",d=[{name:"abcwrlds",id:"0"}],m={name:c,version:l,description:f,authors:d};const t=g("message-logger"),o=new Map,u={...m,onStart(){console.log("[MessageSniffer] Starting...");const s=r("_currentDispatchActionType");if(!s){console.error("[MessageSniffer] Could not find Dispatcher!");return}console.log("[MessageSniffer] Found Dispatcher"),t.before(s,"_dispatch",(S,i)=>{const[e]=i;if(e.type==="MESSAGE_CREATE"&&e.message&&(o.set(e.message.id,e.message),console.log("[MessageSniffer] Cached message:",e.message.id)),e.type==="MESSAGE_DELETE"&&e.id){const n=o.get(e.id);n&&console.log("[MessageSniffer] DELETED:",n.content)}if(e.type==="MESSAGE_UPDATE"&&e.message){const n=o.get(e.message.id);n&&n.content!==e.message.content&&(console.log("[MessageSniffer] EDITED:",n.content,"->",e.message.content),o.set(e.message.id,e.message))}}),console.log("[MessageSniffer] Started successfully!")},onStop(){console.log("[MessageSniffer] Stopping..."),t.unpatchAll(),o.clear()}};a(u);
